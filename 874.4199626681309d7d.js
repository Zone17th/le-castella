"use strict";(self.webpackChunkle_castella=self.webpackChunkle_castella||[]).push([[874],{5874:(A,c,r)=>{r.r(c),r.d(c,{AuthModule:()=>U});var g=r(6814),m=r(2787),s=r(95),n=r(5879),v=r(6031),d=r(2920),a=r(3599),l=r(824),p=r(2840),z=r(855),x=r(1958),f=r(2595);function T(t,u){if(1&t&&(n.TgZ(0,"b",14),n._uU(1),n.qZA()),2&t){const o=n.oxw();n.xp6(1),n.Oqu(o.errorMessage)}}function b(t,u){1&t&&(n.TgZ(0,"div",14),n._uU(1," Username is required ! "),n.qZA())}function C(t,u){if(1&t&&(n.ynx(0),n.YNc(1,b,2,0,"div",3),n.BQk()),2&t){const o=n.oxw();n.xp6(1),n.Q6J("ngIf",null==o.username||null==o.username.errors?null:o.username.errors.required)}}function _(t,u){if(1&t){const o=n.EpF();n.TgZ(0,"span",15),n.NdJ("click",function(){n.CHM(o);const e=n.oxw();return n.KtG(e.passwordVisibleConfirm=!e.passwordVisibleConfirm)}),n.qZA()}if(2&t){const o=n.oxw();n.Q6J("nzType",o.passwordVisibleConfirm?"eye-invisible":"eye")}}function y(t,u){1&t&&(n.TgZ(0,"div",14),n._uU(1,"Password is required ! "),n.qZA())}const Z=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:(()=>{class t{constructor(o,i,e){this.fb=o,this._router=i,this._authService=e,this.inputUsernameTouched=!1,this.inputPasswordTouched=!1,this.passwordVisibleConfirm=!1}ngOnInit(){this.validateForm=this.fb.group({username:[null,[s.kI.required]],password:[null,[s.kI.required]]}),this.username?.valueChanges.subscribe(()=>{this.inputUsernameTouched=!0}),this.password?.valueChanges.subscribe(()=>{this.inputPasswordTouched=!0})}submitForm(){this.inputUsernameTouched=!0,this.inputPasswordTouched=!0,this.validateForm.invalid&&Object.values(this.validateForm.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))}),this._authService.login(this.validateForm.value).subscribe({next:o=>{localStorage.setItem("userName",o.username),localStorage.setItem("accessToken",o.accessToken),localStorage.setItem("role",o.role);const i=localStorage.getItem("returnUrl");i?this._router.navigateByUrl(i).then(e=>localStorage.removeItem("returnUrl")):this._router.navigate(["/admin/product"])},error:o=>{this.errorMessage="Either email address or password is incorrect. Please try again!"}})}get username(){return this.validateForm.get("username")}get password(){return this.validateForm.get("password")}static#n=this.\u0275fac=function(i){return new(i||t)(n.Y36(s.QS),n.Y36(m.F0),n.Y36(v.e))};static#t=this.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:25,vars:9,consts:[[1,"body"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],[1,"login-title"],["class","login-error",4,"ngIf"],["nzFor","email",1,"login-label",3,"nzSpan"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","username","placeholder","Enter your username"],[4,"ngIf"],["nzFor","password",1,"login-label",3,"nzSpan"],["nzPrefixIcon","lock",3,"nzSuffix"],["id","confirm","nz-input","","formControlName","password","placeholder","Enter your password...",3,"type"],["suffixTemplateConfirm",""],["nz-row","",1,"login-form-margin"],["nz-button","",1,"login-form-button",3,"nzType"],[1,"login-error"],["nz-icon","",3,"nzType","click"]],template:function(i,e){if(1&i&&(n.TgZ(0,"div",0)(1,"form",1),n.NdJ("ngSubmit",function(){return e.submitForm()}),n.TgZ(2,"nz-form-item")(3,"h3",2),n._uU(4,"Login into your account"),n.qZA(),n.YNc(5,T,2,1,"b",3),n.qZA(),n.TgZ(6,"nz-form-item")(7,"nz-form-control")(8,"nz-form-label",4),n._uU(9,"Username"),n.qZA(),n.TgZ(10,"nz-input-group",5),n._UZ(11,"input",6),n.qZA(),n.YNc(12,C,2,1,"ng-container",7),n.qZA()(),n.TgZ(13,"nz-form-item")(14,"nz-form-control")(15,"nz-form-label",8),n._uU(16,"Password"),n.qZA(),n.TgZ(17,"nz-input-group",9),n._UZ(18,"input",10),n.qZA(),n.YNc(19,_,1,1,"ng-template",null,11,n.W1O),n.YNc(21,y,2,0,"div",3),n.qZA()(),n._UZ(22,"div",12),n.TgZ(23,"button",13),n._uU(24,"Login"),n.qZA()()()),2&i){const h=n.MAs(20);n.xp6(1),n.Q6J("formGroup",e.validateForm),n.xp6(4),n.Q6J("ngIf",e.errorMessage),n.xp6(3),n.Q6J("nzSpan",6),n.xp6(4),n.Q6J("ngIf",e.inputUsernameTouched),n.xp6(3),n.Q6J("nzSpan",6),n.xp6(2),n.Q6J("nzSuffix",h),n.xp6(1),n.Q6J("type",e.passwordVisibleConfirm?"text":"password"),n.xp6(3),n.Q6J("ngIf",e.inputPasswordTouched&&(null==e.password||null==e.password.errors?null:e.password.errors.required)),n.xp6(2),n.Q6J("nzType","primary")}},dependencies:[g.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.t3,d.SK,a.Lr,a.Nx,a.iK,a.Fd,l.Zp,l.gB,l.ke,p.ix,z.w,x.dQ,f.Ls],styles:[".body[_ngcontent-%COMP%]{flex-grow:1}.login-form[_ngcontent-%COMP%]{max-width:500px;margin:100px auto;border-radius:10px;background-color:#e9e6e3;padding:70px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px;justify-content:end}.login-form-forgot[_ngcontent-%COMP%]{float:right;text-decoration:underline}.login-form-button[_ngcontent-%COMP%]{width:100%;border-radius:5px;margin-top:10px}.login-label[_ngcontent-%COMP%]{float:left;margin-bottom:5px}.login-error[_ngcontent-%COMP%]{color:#ff2b2b;float:left}"]})}return t})()}];let w=(()=>{class t{static#n=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=n.oAB({type:t});static#o=this.\u0275inj=n.cJS({imports:[m.Bz.forChild(Z),m.Bz]})}return t})(),U=(()=>{class t{static#n=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=n.oAB({type:t});static#o=this.\u0275inj=n.cJS({imports:[g.ez,w,s.UX,a.U5,l.o7,p.sL,f.PV]})}return t})()}}]);