"use strict";(self.webpackChunkle_castella=self.webpackChunkle_castella||[]).push([[938],{3938:(Ut,w,r)=>{r.r(w),r.d(w,{StaffModule:()=>wt});var f=r(6814),p=r(2787),b=r(8645),z=r(9773),t=r(5879),S=r(9862),g=r(7845);let O=(()=>{class e{constructor(n){this._httpClient=n}getStaffList(n,o,i){let a=(new S.LE).set("page",o).set("size",i);return n&&(a=a.set("key",n)),this._httpClient.get(`${g.N.apiPrefixUrl}/admin/staff`,{params:a})}getDetailStaff(n){return this._httpClient.get(`${g.N.apiPrefixUrl}/admin/staff/${n}`)}createStaff(n){return this._httpClient.post(`${g.N.apiPrefixUrl}/admin/staff`,n)}updateStaff(n){return this._httpClient.put(`${g.N.apiPrefixUrl}/admin/staff`,n)}deleteStaff(n){return this._httpClient.delete(`${g.N.apiPrefixUrl}/admin/staff/${n}`)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(S.eN))};static#n=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var U=r(2561),m=r(3626),u=r(824),c=r(95),_=r(2595),C=r(2840),Z=r(855),A=r(1958),d=r(3891),D=r(2274),h=r(7582),G=r(1374),v=r(4716),H=r(4194),P=r(874),y=r(7754),k=r(6109),T=r(331),J=r(9388),M=r(3651),L=r(8324),Q=r(5448),I=r(4300),q=r(1752);const R=["okBtn"],K=["cancelBtn"];function $(e,s){1&e&&(t.TgZ(0,"div",15),t._UZ(1,"span",16),t.qZA())}function j(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"span",18),t.BQk()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("nzType",n||"exclamation-circle")}}function W(e,s){if(1&e&&(t.ynx(0),t.YNc(1,j,2,1,"ng-container",8),t.TgZ(2,"div",17),t._uU(3),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("nzStringTemplateOutlet",n.nzIcon),t.xp6(2),t.Oqu(n.nzTitle)}}function X(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(n.nzCancelText)}}function tt(e,s){1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"nzI18n"),t.BQk()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Modal.cancelText")))}function nt(e,s){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(n.nzOkText)}}function et(e,s){1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"nzI18n"),t.BQk()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Modal.okText")))}function ot(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,$,2,0,"div",4),t.TgZ(3,"div",5)(4,"div")(5,"div",6)(6,"div",7),t.YNc(7,W,4,2,"ng-container",8),t.qZA(),t.TgZ(8,"div",9)(9,"button",10,11),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onCancel())}),t.YNc(11,X,2,1,"ng-container",12),t.YNc(12,tt,3,3,"ng-container",12),t.qZA(),t.TgZ(13,"button",13,14),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onConfirm())}),t.YNc(15,nt,2,1,"ng-container",12),t.YNc(16,et,3,3,"ng-container",12),t.qZA()()()()()()()}if(2&e){const n=t.oxw();t.ekj("ant-popover-rtl","rtl"===n.dir),t.Q6J("cdkTrapFocusAutoCapture",null!==n.nzAutoFocus)("ngClass",n._classMap)("ngStyle",n.nzOverlayStyle)("@.disabled",!(null==n.noAnimation||!n.noAnimation.nzNoAnimation))("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),t.xp6(2),t.Q6J("ngIf",n.nzPopconfirmShowArrow),t.xp6(5),t.Q6J("nzStringTemplateOutlet",n.nzTitle),t.xp6(2),t.Q6J("nzSize","small"),t.uIk("cdkFocusInitial","cancel"===n.nzAutoFocus||null),t.xp6(2),t.Q6J("ngIf",n.nzCancelText),t.xp6(1),t.Q6J("ngIf",!n.nzCancelText),t.xp6(1),t.Q6J("nzSize","small")("nzType","danger"!==n.nzOkType?n.nzOkType:"primary")("nzDanger",n.nzOkDanger||"danger"===n.nzOkType)("nzLoading",n.confirmLoading),t.uIk("cdkFocusInitial","ok"===n.nzAutoFocus||null),t.xp6(2),t.Q6J("ngIf",n.nzOkText),t.xp6(1),t.Q6J("ngIf",!n.nzOkText)}}let rt=(()=>{class e extends k.Mg{getProxyPropertyMap(){return{nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus],...super.getProxyPropertyMap()}}constructor(n,o,i,a,l,N){super(n,o,i,a,l,N),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new t.vpe,this.nzOnCancel=new t.vpe,this.nzOnConfirm=new t.vpe,this.componentRef=this.hostView.createComponent(at)}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,z.R)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,z.R)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(t._Vd),t.Y36(t.Qsj),t.Y36(T.P,9),t.Y36(P.jY))};static#n=this.\u0275dir=t.lG2({type:e,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(o,i){2&o&&t.ekj("ant-popover-open",i.visible)},inputs:{arrowPointAtCenter:["nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:["nzPopconfirmTitle","title"],directiveTitle:["nz-popconfirm","directiveTitle"],trigger:["nzPopconfirmTrigger","trigger"],placement:["nzPopconfirmPlacement","placement"],origin:["nzPopconfirmOrigin","origin"],mouseEnterDelay:["nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:["nzPopconfirmOverlayStyle","overlayStyle"],visible:["nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[t.qOj]})}return(0,h.gn)([(0,y.yF)()],e.prototype,"arrowPointAtCenter",void 0),(0,h.gn)([(0,y.yF)()],e.prototype,"nzOkDanger",void 0),(0,h.gn)([(0,y.yF)()],e.prototype,"nzCondition",void 0),(0,h.gn)([(0,y.yF)()],e.prototype,"nzPopconfirmShowArrow",void 0),(0,h.gn)([(0,P.oS)()],e.prototype,"nzPopconfirmBackdrop",void 0),(0,h.gn)([(0,P.oS)()],e.prototype,"nzAutofocus",void 0),e})(),at=(()=>{class e extends k.XK{constructor(n,o,i,a,l){super(n,i,l),this.elementRef=o,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new b.x,this.nzOnConfirm=new b.x,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=a}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){const n=(0,y.lN)(this.nzBeforeConfirm()).pipe((0,G.P)());this.confirmLoading=!0,n.pipe((0,v.x)(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),(0,z.R)(this.nzVisibleChange),(0,z.R)(this.destroy$)).subscribe(o=>{o&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const n=this.elementFocusedBeforeModalWasOpened;if(n&&"function"==typeof n.focus){const o=this.document.activeElement,i=this.elementRef.nativeElement;(!o||o===this.document.body||o===i||i.contains(o))&&n.focus()}}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(J.Is,8),t.Y36(f.K0,8),t.Y36(T.P,9))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["nz-popconfirm"]],viewQuery:function(o,i){if(1&o&&(t.Gf(R,5,t.SBq),t.Gf(K,5,t.SBq)),2&o){let a;t.iGM(a=t.CRH())&&(i.okBtn=a),t.iGM(a=t.CRH())&&(i.cancelBtn=a)}},exportAs:["nzPopconfirmComponent"],features:[t.qOj],decls:2,vars:6,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],["class","ant-popover-arrow",4,"ngIf"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"nzSize","click"],["cancelBtn",""],[4,"ngIf"],["nz-button","",3,"nzSize","nzType","nzDanger","nzLoading","click"],["okBtn",""],[1,"ant-popover-arrow"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(o,i){1&o&&(t.YNc(0,ot,17,21,"ng-template",0,1,t.W1O),t.NdJ("overlayOutsideClick",function(l){return i.onClickOutside(l)})("detach",function(){return i.hide()})("positionChange",function(l){return i.onPositionChange(l)})),2&o&&t.Q6J("cdkConnectedOverlayHasBackdrop",i.nzBackdrop)("cdkConnectedOverlayOrigin",i.origin)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayOpen",i._visible)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",i.nzArrowPointAtCenter)},dependencies:[f.mk,f.O5,f.PC,C.ix,Z.w,A.dQ,M.pI,_.Ls,L.f,Q.hQ,T.P,I.mK,q.o9],encapsulation:2,data:{animation:[H.$C]},changeDetection:0})}return e})(),st=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[J.vT,f.ez,C.sL,M.U8,q.YI,_.PV,L.T,Q.e4,T.g,k.cg,I.rt]})}return e})();function ct(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.search())}),t.qZA()}}const lt=function(e){return["/admin/staff",e]},ft=function(e){return["/admin/staff/edit",e]};function pt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",20),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",21),t._uU(11),t.qZA(),t.TgZ(12,"td",22)(13,"p",23),t._UZ(14,"span",24),t.qZA(),t.TgZ(15,"p",25),t.NdJ("nzOnConfirm",function(){const a=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.delete(a.id))}),t._UZ(16,"span",26),t.qZA()()()}if(2&e){const n=s.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(10,lt,n.id)),t.xp6(1),t.Oqu(n.username),t.xp6(2),t.Oqu(n.fullName),t.xp6(2),t.Oqu(t.xi3(7,7,n.createdDate,"dd/MM/yyyy hh:mm a")),t.xp6(3),t.Oqu("Store: "+(null==n.store?null:n.store.name)),t.xp6(2),t.Oqu(n.role),t.xp6(3),t.Q6J("routerLink",t.VKq(12,ft,n.id))}}function mt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"nz-pagination",27),t.NdJ("nzPageIndexChange",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.paging(i))}),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("nzPageIndex",n.page+1)("nzPageSize",n.size)("nzTotal",n.totalElements)}}const ut=function(){return["/admin/staff"]},dt=function(){return["/admin/staff/create"]};let zt=(()=>{class e{constructor(n,o,i,a){this._activatedRoute=n,this._router=o,this._staffService=i,this._notification=a,this.unsubscribe$=new b.x,this.staffList=[],this.searchOptions="",this.dataLoaded=!1,this.role="",this.page=0,this.size=5,this.totalElements=0}ngOnInit(){this._activatedRoute.queryParams.subscribe(n=>{this.page=Number(n.page)||0,this.size=Number(n.size)||10,this.searchOptions=n.query||""}),this.loadData()}paging(n){this.page=n-1,this.reGenerateUrl(),this.loadData()}reGenerateUrl(){this._router.navigate([],{queryParams:{query:this.searchOptions,page:this.page,size:this.size}})}loadData(){this._staffService.getStaffList(this.searchOptions,this.page,this.size).pipe((0,z.R)(this.unsubscribe$)).subscribe({next:n=>{this.staffList=n.content,this.totalElements=n.totalElements,this.dataLoaded=!0},error:n=>{}})}delete(n){this._staffService.deleteStaff(n).pipe((0,z.R)(this.unsubscribe$)).subscribe({next:()=>{this.createNotification("success","Success deleted!",""),this.loadData()},error:o=>{}})}search(){this.reGenerateUrl(),this.loadData()}createNotification(n,o,i){this._notification.create(n,o,i)}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(O),t.Y36(U.zb))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-staff-list"]],decls:38,vars:11,consts:[[1,"px-3","pb-4"],["nzSeparator",">",1,"py-3"],["role","button",1,"text-primary","fw-bold",3,"routerLink"],[1,"text-primary","fw-bold"],[1,"d-flex","align-items-center","justify-content-between","gap-1","h-10"],[1,"d-flex","flex-column","w-25","gap-2"],[1,"d-flex","align-items-center"],[1,"rounded-3","p-2","bg-light",3,"nzSuffix"],["type","text","nz-input","","placeholder","input search text",1,"bg-light",3,"ngModel","ngModelChange","keydown.enter"],["suffixIconSearch",""],[1,"d-flex","justify-content-end","w-5","mt-2","mb-3"],["nz-button","",1,"rounded-3","d-flex","align-items-center","justify-content-center","p-4",3,"nzType","routerLink"],[1,"table-custom",3,"nzData","nzFrontPagination"],["fixedTable",""],["nzWidth","20%"],["nzWidth","10%",1,"text-center"],[4,"ngFor","ngForOf"],[3,"nzPageIndex","nzPageSize","nzTotal","nzPageIndexChange",4,"ngIf"],["nz-icon","","nzType","search","role","button",3,"click"],["role","button",1,"fw-bolder",3,"routerLink"],[1,"fw-bold"],[1,"text-center"],[1,"d-flex","align-items-center","justify-content-center","gap-3",2,"font-size","25px"],["role","button",1,"text-dark"],["nz-icon","","nzType","edit","nzTheme","outline",3,"routerLink"],["role","button","nz-popconfirm","","nzCancelText","Cancel","nzPopconfirmTitle","Sure to delete?",3,"nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"],[3,"nzPageIndex","nzPageSize","nzTotal","nzPageIndexChange"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0)(1,"nz-breadcrumb",1)(2,"nz-breadcrumb-item",2),t._uU(3,"Staff Management "),t.qZA(),t.TgZ(4,"nz-breadcrumb-item",3),t._uU(5,"Staff List"),t.qZA()(),t.TgZ(6,"div",4)(7,"h4"),t._uU(8,"Staff List"),t.qZA(),t.TgZ(9,"div",5)(10,"div",6)(11,"nz-input-group",7)(12,"input",8),t.NdJ("ngModelChange",function(l){return i.searchOptions=l})("keydown.enter",function(){return i.search()}),t.qZA()(),t.YNc(13,ct,1,0,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(15,"div",10)(16,"button",11)(17,"span"),t._uU(18,"Add new staff"),t.qZA()()()()(),t.TgZ(19,"nz-table",12,13)(21,"thead")(22,"tr")(23,"th",14),t._uU(24,"Username"),t.qZA(),t.TgZ(25,"th",14),t._uU(26,"Full Name"),t.qZA(),t.TgZ(27,"th",14),t._uU(28,"Created Date"),t.qZA(),t.TgZ(29,"th",14),t._uU(30,"Store"),t.qZA(),t.TgZ(31,"th",15),t._uU(32,"Role"),t.qZA(),t.TgZ(33,"th",15),t._uU(34,"Action"),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,pt,17,14,"tr",16),t.qZA()(),t.YNc(37,mt,1,3,"nz-pagination",17),t.qZA()),2&o){const a=t.MAs(14),l=t.MAs(20);t.xp6(2),t.Q6J("routerLink",t.DdM(9,ut)),t.xp6(9),t.Q6J("nzSuffix",a),t.xp6(1),t.Q6J("ngModel",i.searchOptions),t.xp6(4),t.Q6J("nzType","primary")("routerLink",t.DdM(10,dt)),t.xp6(3),t.Q6J("nzData",i.staffList)("nzFrontPagination",!1),t.xp6(17),t.Q6J("ngForOf",l.data),t.xp6(1),t.Q6J("ngIf",i.dataLoaded)}},dependencies:[f.sg,f.O5,p.rH,m.Dg,m.MO,u.Zp,u.gB,u.ke,c.Fj,c.JJ,c.On,_.Ls,C.ix,Z.w,A.dQ,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z,D.dE,rt,f.uU]})}return e})();var gt=r(5842);let ht=(()=>{class e{constructor(n){this._httpClient=n}getAllStore(){return this._httpClient.get(`${g.N.apiPrefixUrl}/admin/store`)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(S.eN))};static#n=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var B=r(2920),x=r(3599),F=r(8070);const _t=["password"];function Ct(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"span",25),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.passwordVisible=!i.passwordVisible)}),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("nzType",n.passwordVisible?"eye-invisible":"eye")}}function yt(e,s){1&e&&(t.TgZ(0,"div")(1,"span",26),t._uU(2,"Passwords is required."),t.qZA()())}function xt(e,s){if(1&e&&t._UZ(0,"nz-option",27),2&e){const n=s.$implicit;t.Q6J("nzLabel","Store: "+(null==n?null:n.name))("nzValue",null==n?null:n.id)}}function vt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.resetForm())}),t._uU(1,"Cancel"),t.qZA()}}function Tt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.showDeleteConfirm())}),t._uU(1,"Delete "),t.qZA()}}const bt=function(e){return["/admin/staff/edit",e]};function St(e,s){if(1&e&&(t.TgZ(0,"button",30),t._uU(1,"Edit "),t.qZA()),2&e){const n=t.oxw();t.Q6J("routerLink",t.VKq(1,bt,null==n.staffData?null:n.staffData.id))}}function Ot(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.submitForm("create"))}),t._uU(1,"Create "),t.qZA()}}function Zt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.submitForm("update"))}),t._uU(1,"Update "),t.qZA()}}const Y=function(e){return{"disabled-input":e}};let E=(()=>{class e{constructor(n,o,i,a,l,N){this._fb=n,this._router=o,this._modal=i,this._staffService=a,this._storeService=l,this._notification=N,this.readonly=!1,this.edit=!0,this.storeList=[],this.isSubmittingForm=!1,this.passwordRequired=!1,this.passwordVisible=!1}ngOnInit(){this.loadStore(),this.staffForm=this._fb.group({id:[this.staffData?.id||this.id||null],username:[this.staffData?.username||"",[c.kI.required]],fullName:[this.staffData?.fullName||"",[c.kI.required]],password:[""],store:[this.staffData?.store?.id||"",[c.kI.required]]})}resetForm(){this._router.navigateByUrl("/admin/staff").then(()=>this.staffForm.reset())}showDeleteConfirm(){this._modal.confirm({nzTitle:"Delete staff",nzContent:'<b >Are you sure delete this staff?</b> </br><p style="color: red"> This action is permanent and cannot be undone!</>',nzOkText:"Delete",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>this.deleteForm(),nzCancelText:"No, please take me back",nzOnCancel:()=>console.log("Cancel")})}loadStore(){this._storeService.getAllStore().subscribe({next:n=>{this.storeList=n,console.log(this.storeList)},error:n=>{}})}deleteForm(){this.id=this.staffData.id,this._staffService.deleteStaff(this.id).pipe((0,v.x)(()=>this.isSubmittingForm=!1)).subscribe({next:n=>{this._router.navigateByUrl("/admin/staff").then(()=>this._notification.success("","You have deleted a school"))},error:n=>{400==n.status&&this._notification.error("",n.error)}})}submitForm(n){"create"===n?this.postForm():this.putForm()}putForm(){this.validateFormData()&&(this.isSubmittingForm=!0,this._staffService.updateStaff(this.staffForm.value).pipe((0,v.x)(()=>this.isSubmittingForm=!1)).subscribe({next:n=>{this._router.navigateByUrl("/admin/staff").then(()=>this._notification.success("Congratulation!","Update staff successfully."))},error:n=>{400==n.status&&this._notification.error("",n.error)}}))}postForm(){let n=this.validateFormData();this.passwordValidator(),n&&!this.passwordRequired&&(this.isSubmittingForm=!0,this._staffService.createStaff(this.staffForm.value).pipe((0,v.x)(()=>this.isSubmittingForm=!1)).subscribe({next:o=>{this._router.navigateByUrl("/admin/staff").then(()=>this._notification.success("Congratulation!","Create staff successfully."))},error:o=>{400==o.status&&this._notification.error("",o.error)}}))}validateFormData(){return this.staffForm.get("id")?.setValue(this.id||null),!this.staffForm.invalid||(Object.values(this.staffForm.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))}),!1)}passwordValidator(){this.passwordRequired=!this.password.nativeElement.value}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(c.qu),t.Y36(p.F0),t.Y36(gt.Sf),t.Y36(O),t.Y36(ht),t.Y36(U.zb))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-staff-form"]],viewQuery:function(o,i){if(1&o&&t.Gf(_t,5),2&o){let a;t.iGM(a=t.CRH())&&(i.password=a.first)}},inputs:{readonly:"readonly",edit:"edit",staffData:"staffData"},decls:44,vars:35,consts:[[1,"p-5"],["nz-form","",3,"formGroup"],["nzFor","username",3,"nzSpan"],[1,"text-danger","ps-1"],["nzErrorTip","Please input username",3,"nzSpan"],["type","text","nz-input","","formControlName","username","placeholder","Enter Username Here...",3,"readonly","ngClass"],["nzFor","fullName",3,"nzSpan"],["nzErrorTip","Please input full name",3,"nzSpan"],["type","text","nz-input","","formControlName","fullName","placeholder","Please input full name",3,"readOnly","ngClass"],["nzFor","website",3,"nzSpan"],["nzErrorTip","Enter Password Here...",3,"nzSpan"],[3,"nzSuffix"],["id","confirm","nz-input","","placeholder","Please input password","formControlName","password",3,"readOnly","type"],["password",""],["suffixTemplateConfirm",""],[4,"ngIf"],["nzFor","childReceivingAge",3,"nzSpan"],["nzErrorTip","please select a store",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","formControlName","store",3,"nzDisabled","nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLg","nzMd","nzSm"],["nz-button","",3,"click",4,"ngIf"],["nz-button","","nzType","primary","nzDanger","",3,"click",4,"ngIf"],["nz-button","","nzType","primary",3,"routerLink",4,"ngIf"],["nz-button","","nzType","primary",3,"click",4,"ngIf"],["role","button","nz-icon","",3,"nzType","click"],[1,"text-danger"],[3,"nzLabel","nzValue"],["nz-button","",3,"click"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-button","","nzType","primary",3,"routerLink"],["nz-button","","nzType","primary",3,"click"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0)(1,"form",1)(2,"nz-form-item")(3,"nz-form-label",2),t._uU(4,"Username"),t.TgZ(5,"span",3),t._uU(6,"*"),t.qZA()(),t.TgZ(7,"nz-form-control",4),t._UZ(8,"input",5),t.qZA()(),t.TgZ(9,"nz-form-item")(10,"nz-form-label",6),t._uU(11,"Full Name"),t.TgZ(12,"span",3),t._uU(13,"*"),t.qZA()(),t.TgZ(14,"nz-form-control",7),t._UZ(15,"input",8),t.qZA()(),t.TgZ(16,"nz-form-item")(17,"nz-form-label",9),t._uU(18,"Password"),t.TgZ(19,"span",3),t._uU(20,"*"),t.qZA()(),t.TgZ(21,"nz-form-control",10)(22,"nz-input-group",11),t._UZ(23,"input",12,13),t.qZA(),t.YNc(25,Ct,1,1,"ng-template",null,14,t.W1O),t.YNc(27,yt,3,0,"div",15),t.qZA()(),t.TgZ(28,"nz-form-item")(29,"nz-form-label",16),t._uU(30,"Store"),t.TgZ(31,"span",3),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"nz-form-control",17)(34,"nz-select",18),t.YNc(35,xt,1,2,"nz-option",19),t.qZA()()(),t.TgZ(36,"nz-form-item"),t._UZ(37,"nz-form-control",20),t.TgZ(38,"nz-form-control",20),t.YNc(39,vt,2,0,"button",21),t.YNc(40,Tt,2,0,"button",22),t.YNc(41,St,2,3,"button",23),t.YNc(42,Ot,2,0,"button",24),t.YNc(43,Zt,2,0,"button",24),t.qZA()()()()),2&o){const a=t.MAs(26);t.xp6(1),t.Q6J("formGroup",i.staffForm),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(4),t.Q6J("nzSpan",10),t.xp6(1),t.Q6J("readonly",i.edit)("ngClass",t.VKq(31,Y,i.edit)),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(4),t.Q6J("nzSpan",10),t.xp6(1),t.Q6J("readOnly",i.readonly)("ngClass",t.VKq(33,Y,i.readonly)),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(4),t.Q6J("nzSpan",10),t.xp6(1),t.Q6J("nzSuffix",a),t.xp6(1),t.Q6J("readOnly",i.readonly)("type",i.passwordVisible?"text":"password"),t.xp6(4),t.Q6J("ngIf",i.passwordRequired),t.xp6(2),t.Q6J("nzSpan",3),t.xp6(4),t.Q6J("nzSpan",10),t.xp6(1),t.Q6J("nzDisabled",i.readonly)("nzPlaceHolder","Select a Store"),t.xp6(1),t.Q6J("ngForOf",i.storeList),t.xp6(2),t.Q6J("nzLg",3)("nzMd",2)("nzSm",0),t.xp6(1),t.Q6J("nzLg",10)("nzMd",20)("nzSm",24),t.xp6(1),t.Q6J("ngIf",!i.readonly),t.xp6(1),t.Q6J("ngIf",i.readonly),t.xp6(1),t.Q6J("ngIf",i.readonly),t.xp6(1),t.Q6J("ngIf",!i.readonly&&!i.edit),t.xp6(1),t.Q6J("ngIf",!i.readonly&&i.edit)}},dependencies:[f.mk,f.sg,f.O5,p.rH,u.Zp,u.gB,u.ke,c._Y,c.Fj,c.JJ,c.JL,_.Ls,C.ix,Z.w,A.dQ,B.t3,B.SK,x.Lr,x.Nx,x.iK,x.Fd,c.sg,c.u,F.Ip,F.Vq],styles:["nz-select[_ngcontent-%COMP%]{max-width:100%;margin-bottom:.25rem}nz-form-control[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{margin-bottom:.5rem}nz-form-item[_ngcontent-%COMP%]{margin-bottom:1rem}nz-breadcrumb[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin:2rem 0}nz-form-label[_ngcontent-%COMP%]{text-align:start;font-weight:700}button[_ngcontent-%COMP%]{margin-right:1rem;margin-bottom:5px}.ant-checkbox-wrapper.ant-checkbox-wrapper-in-form-item[_ngcontent-%COMP%]{margin-bottom:1rem}.disabled-input[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#999;cursor:not-allowed}.disabled-input[readonly][_ngcontent-%COMP%]:hover{outline:none}"]})}return e})();const At=function(){return["/admin/staff"]};function kt(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"app-staff-form",5),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("readonly",!1)("staffData",n.staffData)("edit",!0)}}const V=function(){return["/admin/staff"]},Ft=[{path:"",component:zt},{path:"create",component:(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-staff"]],decls:9,vars:4,consts:[[1,"px-3"],["nzSeparator",">",1,"py-3"],["role","button",1,"text-primary","fw-bold",3,"routerLink"],[1,"text-primary","fw-bold"],[3,"edit","readonly"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"nz-breadcrumb",1)(2,"nz-breadcrumb-item",2),t._uU(3,"Staff Management "),t.qZA(),t.TgZ(4,"nz-breadcrumb-item",3),t._uU(5,"Add New Staff"),t.qZA()(),t.TgZ(6,"h4"),t._uU(7,"Add New Staff"),t.qZA(),t._UZ(8,"app-staff-form",4),t.qZA()),2&o&&(t.xp6(2),t.Q6J("routerLink",t.DdM(3,At)),t.xp6(6),t.Q6J("edit",!1)("readonly",!1))},dependencies:[p.rH,m.Dg,m.MO,E]})}return e})()},{path:"edit/:id",component:(()=>{class e{constructor(n,o){this._staffService=n,this._activatedRoute=o}ngOnInit(){this._activatedRoute.paramMap.subscribe(n=>this.id=+n.get("id")),this.loadStaff()}loadStaff(){this._staffService.getDetailStaff(this.id).subscribe({next:n=>{console.log(n),this.staffData={id:n.id,username:n.username,fullName:n.fullName,store:n.store}},error:n=>{console.error(n)}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(O),t.Y36(p.gz))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-staff"]],decls:12,vars:5,consts:[[1,"px-3"],["nzSeparator",">",1,"py-3"],["role","button",1,"text-primary","fw-bold",3,"routerLink"],[1,"text-primary","fw-bold"],[4,"ngIf"],[3,"readonly","staffData","edit"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"nz-breadcrumb",1)(2,"nz-breadcrumb-item",2),t._uU(3,"Staff Management "),t.qZA(),t.TgZ(4,"nz-breadcrumb-item",2),t._uU(5,"Staff List "),t.qZA(),t.TgZ(6,"nz-breadcrumb-item")(7,"a",3),t._uU(8,"Edit Staff"),t.qZA()()(),t.TgZ(9,"h4"),t._uU(10,"Edit Staff"),t.qZA(),t.YNc(11,kt,2,3,"ng-container",4),t.qZA()),2&o&&(t.xp6(2),t.Q6J("routerLink",t.DdM(3,V)),t.xp6(2),t.Q6J("routerLink",t.DdM(4,V)),t.xp6(7),t.Q6J("ngIf",i.staffData))},dependencies:[f.O5,p.rH,m.Dg,m.MO,E]})}return e})()}];let Nt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(Ft),p.Bz]})}return e})(),wt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[f.ez,Nt,m.lt,u.o7,c.u5,_.PV,C.sL,d.HQ,D.uK,st,x.U5,c.UX,F.LV]})}return e})()}}]);